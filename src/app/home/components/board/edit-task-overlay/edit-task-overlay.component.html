<main class="task-overlay" (click)="onCloseOverlay()">
  <form
    onsubmit="saveEditedTask(); return false"
    class="add-task-form edit-form"
    (click)="$event.stopPropagation()"
  >
    <div class="add-task-overlay-input-box">
      <label for="title">Title</label>
      <input
        placeholder="Enter a title"
        name="title"
        required
        id="title"
        type="text"
        value="${task.title}"
      />
    </div>
    <div class="add-task-overlay-input-box">
      <label for="description">Description</label>
      <textarea
        placeholder="Enter a Description"
        id="description"
        cols="30"
        rows="10"
      >
${task.description}</textarea
      >
    </div>
    <div class="add-task-overlay-input-box">
      <label for="due-date">Due date</label>
      <input
        required
        onclick="setMinDate()"
        type="date"
        name="due-date"
        id="due-date"
        value="${task.dueDate}"
      />
    </div>
    <div class="add-task-overlay-input-box">
      <span>Prio</span>
      <div id="prio-box">
        <div id="high-prio-box" onclick="setPrio('high')">
          <span>Urgent</span>
          <img
            src="./assets/img/icons/high-prio-icon-small.svg"
            alt="high-prio"
          />
        </div>
        <div id="medium-prio-box" onclick="setPrio('medium')">
          <span>Medium</span>
          <img
            src="./assets/img/icons/medium-prio-icon-small.svg"
            alt="medium-prio"
          />
        </div>
        <div id="low-prio-box" onclick="setPrio('low')">
          <span>Low</span>
          <img
            src="./assets/img/icons/low-prio-icon-small.svg"
            alt="low-prio"
          />
        </div>
      </div>
    </div>

    <div id="add-task-assigned-to-box" class="input-box">
      <span class="label">Assigned to</span>
      @if (!userPickerOpen) {
      <div id="assigned-to">
        <div (click)="toggleUserPicker()">
          <span>Select contacts to assign</span>
          <img
            class="open-arrow"
            src="./assets/img/icons/open-select-arrow.svg"
            alt="arrow-down"
          />
        </div>
      </div>

      } @else {
      <div id="assigned-to">
        <div (click)="toggleUserPicker()">
          <span>Select contacts to assign</span>
          <img
            class="open-arrow"
            src="./assets/img/icons/open-select-arrow.svg"
            alt="arrow-down"
          />
        </div>
        @for (user of users; track $index) {

        <label (change)="user.checked = !user.checked">
          {{ user.firstName + " " + user.lastName }}
          <input name="" type="checkbox" [checked]="user.checked" />
        </label>

        }
      </div>
      }

      <div id="errorTagAssign" class="error-msg-task d-none">
        Please assign the task to at least one person
      </div>
    </div>

    <app-button-with-icon
      class="edit-submit-button"
      [content]="'Ok'"
      [imgSrc]="'./assets/img/icons/checkmark-icon.svg'"
      [colorStyle]="'main-color-style'"
    ></app-button-with-icon>

    <img
      (click)="onCloseOverlay()"
      class="overlay-close-button"
      src="../assets/img/icons/cancel-icon.svg"
      alt=""
    />
  </form>
</main>
